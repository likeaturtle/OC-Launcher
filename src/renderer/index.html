<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenCode Launcher</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- 侧边栏 -->
    <nav class="sidebar">
      <div class="logo">
        <h1>OpenCode</h1>
        <span class="version">Launcher v1.0</span>
      </div>
      <ul class="nav-menu">
        <li class="nav-item active" data-page="home">
          <span class="icon">🏠</span>
          <span>首页</span>
        </li>
        <li class="nav-item" data-page="setup">
          <span class="icon">⚙️</span>
          <span>环境设置</span>
        </li>
        <li class="nav-item" data-page="config">
          <span class="icon">📝</span>
          <span>配置管理</span>
        </li>
        <li class="nav-item" data-page="mcp">
          <span class="icon">🔌</span>
          <span>MCP 服务器</span>
        </li>
        <li class="nav-item" data-page="skills">
          <span class="icon">🛠️</span>
          <span>Skills 配置</span>
        </li>
      </ul>
    </nav>

    <!-- 主内容区 -->
    <main class="main-content">
      <!-- 首页 -->
      <div class="page active" id="page-home">
        <div class="page-header">
          <h2>欢迎使用 OpenCode Launcher</h2>
          <p class="subtitle">独立的 OpenCode 环境管理器</p>
        </div>

        <div class="status-card">
          <div class="status-item">
            <span class="status-label">Node.js 环境</span>
            <span class="status-value" id="nodejs-status">未检测</span>
          </div>
          <div class="status-item">
            <span class="status-label">OpenCode 状态</span>
            <span class="status-value" id="opencode-status">未安装</span>
          </div>
          <div class="status-item">
            <span class="status-label">npm 源</span>
            <span class="status-value" id="npm-registry">未配置</span>
          </div>
        </div>

        <div class="work-dir-section">
          <h3>工作目录</h3>
          <div class="input-group">
            <input type="text" id="work-dir" placeholder="选择 OpenCode 工作目录" readonly>
            <button class="btn btn-secondary" id="select-dir-btn">选择目录</button>
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-primary btn-large" id="launch-tui-btn" disabled>
            <span class="btn-icon">🖥️</span>
            <span>启动 TUI</span>
          </button>
          <button class="btn btn-primary btn-large" id="launch-web-btn" disabled>
            <span class="btn-icon">🌐</span>
            <span>启动 Web</span>
          </button>
        </div>

        <div class="web-options" id="web-options" style="display: none;">
          <label>
            端口号:
            <input type="number" id="web-port" value="4096" min="1024" max="65535">
          </label>
        </div>
      </div>

      <!-- 环境设置页 -->
      <div class="page" id="page-setup">
        <div class="page-header">
          <h2>环境设置</h2>
          <p class="subtitle">配置 Node.js 环境和 OpenCode 安装</p>
        </div>

        <div class="setup-steps">
          <div class="setup-step">
            <div class="step-header">
              <span class="step-number">1</span>
              <h3>Node.js 环境</h3>
            </div>
            <p>解压并配置独立的 Node.js 运行时</p>
            <button class="btn btn-primary" id="extract-nodejs-btn">解压 Node.js</button>
            <div class="step-status" id="nodejs-extract-status"></div>
          </div>

          <div class="setup-step">
            <div class="step-header">
              <span class="step-number">2</span>
              <h3>npm 源配置</h3>
            </div>
            <div class="input-group">
              <input type="text" id="npm-registry-input" placeholder="npm 源地址" value="https://registry.npmmirror.com">
            </div>
            <div class="preset-registries">
              <button class="btn btn-small" data-registry="https://registry.npmmirror.com">淘宝源</button>
              <button class="btn btn-small" data-registry="https://registry.npmjs.org">官方源</button>
            </div>
            <button class="btn btn-primary" id="configure-npm-btn">设置 npm 源</button>
            <div class="step-status" id="npm-config-status"></div>
          </div>

          <div class="setup-step">
            <div class="step-header">
              <span class="step-number">3</span>
              <h3>安装 OpenCode</h3>
            </div>
            <p>使用独立 Node.js 环境安装 OpenCode</p>
            <button class="btn btn-primary" id="install-opencode-btn">安装 OpenCode</button>
            <div class="step-status" id="opencode-install-status"></div>
            <div class="install-log" id="install-log"></div>
          </div>
        </div>
      </div>

      <!-- 配置管理页 -->
      <div class="page" id="page-config">
        <div class="page-header">
          <h2>OpenCode 配置</h2>
          <p class="subtitle">可视化编辑 OpenCode 配置文件</p>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon">📝</div>
          <h3>配置编辑器</h3>
          <p>此功能将在未来版本中提供，用于可视化编辑 OpenCode 配置文件</p>
        </div>
      </div>

      <!-- MCP 服务器页 -->
      <div class="page" id="page-mcp">
        <div class="page-header">
          <h2>MCP 服务器管理</h2>
          <p class="subtitle">配置和管理 Model Context Protocol 服务器</p>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon">🔌</div>
          <h3>MCP 配置</h3>
          <p>此功能将在未来版本中提供，用于可视化管理 MCP 服务器连接</p>
        </div>
      </div>

      <!-- Skills 配置页 -->
      <div class="page" id="page-skills">
        <div class="page-header">
          <h2>Skills 配置</h2>
          <p class="subtitle">管理 OpenCode 技能和扩展</p>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon">🛠️</div>
          <h3>Skills 管理</h3>
          <p>此功能将在未来版本中提供，用于可视化配置 OpenCode Skills</p>
        </div>
      </div>
    </main>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
