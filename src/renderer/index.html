<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OC-Launcher</title>
  <link rel="stylesheet" href="fontawesome/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- 侧边栏 -->
    <nav class="sidebar">
      <div class="logo">
        <h1>OC-Launcher</h1>
        <span class="version" id="app-version">App Version: Version Info</span>
      </div>
      <ul class="nav-menu">
        <li class="nav-item active" data-page="home">
          <span class="icon"><i class="fas fa-home"></i></span>
          <span>首页</span>
        </li>
        <li class="nav-item" data-page="setup">
          <span class="icon"><i class="fas fa-wrench"></i></span>
          <span>运行环境</span>
        </li>
        <li class="nav-item" data-page="config">
          <span class="icon"><i class="fas fa-file-alt"></i></span>
          <span>配置管理</span>
        </li>
        <li class="nav-item" data-page="mcp">
          <span class="icon"><i class="fas fa-plug"></i></span>
          <span>MCP 管理</span>
        </li>
        <li class="nav-item" data-page="skills">
          <span class="icon"><i class="fas fa-toolbox"></i></span>
          <span>Skills 管理</span>
        </li>
        <li class="nav-item" data-page="settings">
          <span class="icon"><i class="fas fa-cog"></i></span>
          <span>通用设置</span>
        </li>
      </ul>
    </nav>

    <!-- 主内容区 -->
    <main class="main-content">
      <!-- 首页 -->
      <div class="page active" id="page-home">
        <div class="page-header">
          <h2>欢迎使用 OC-Launcher</h2>
          <p class="subtitle">简单、快速、便捷使用 OpenCode，基于独立使用环境避免全局污染</p>
        </div>

        <div class="status-card">
          <div class="status-item">
            <span class="status-label">Node.js 环境状态</span>
            <span class="status-value" id="nodejs-status">未检测</span>
          </div>
          <div class="status-item">
            <span class="status-label">npm 源</span>
            <span class="status-value" id="npm-registry">未配置</span>
          </div>
          <div class="status-item">
            <span class="status-label">OpenCode 安装状态</span>
            <span class="status-value" id="opencode-status">未安装</span>
          </div>
        </div>

        <div class="work-dir-section">
          <h3><i class="fas fa-folder-open"></i> OpenCode 工作目录</h3>
          <div class="input-group">
            <input type="text" id="work-dir" placeholder="此处显示目录将作为 OpenCode 工作目录">
            <button class="btn btn-secondary" id="select-dir-btn">选择目录</button>
          </div>
          <p class="input-hint"><i class="fas fa-lightbulb"></i> 可点击按钮选择，同时支持手动输入路径或拖拽上传</p>
        </div>

        <div class="actions">
          <button class="btn btn-streaming btn-large" id="launch-tui-btn" disabled>
            <span class="btn-icon"><i class="fas fa-terminal"></i></span>
            <span class="btn-text">启动 TUI 界面</span>
          </button>
          <button class="btn btn-streaming btn-large" id="launch-web-btn" disabled>
            <span class="btn-icon"><i class="fas fa-globe"></i></span>
            <span class="btn-text">启动 Web 界面</span>
          </button>
        </div>

      </div>

      <!-- 环境设置页 -->
      <div class="page" id="page-setup">
        <div class="page-header">
          <h2>运行环境设置</h2>
          <p class="subtitle">配置 Node.js + npm 环境和 OpenCode 安装，支持重置运行环境</p>
        </div>

        <div class="setup-steps">
          <div class="setup-step">
            <div class="step-header">
              <span class="step-number"><i class="fa-brands fa-node-js"></i></span>
              <h3>Node.js 环境</h3>
            </div>
            <p>解压并配置独立的 Node.js 运行时（Node.js Runtime）。</p>
            <button class="btn btn-primary" id="extract-nodejs-btn">解压 Node.js</button>
            <div class="step-status" id="nodejs-extract-status"></div>
          </div>

          <div class="setup-step">
            <div class="step-header">
              <span class="step-number"><i class="fa-brands fa-npm"></i></i></span>
              <h3>npm 源配置</h3>
            </div>
            <p>首次解压 Node.js 环境默认为官方源，可能存在访问缓慢情况，建议进行修改。</p>
            <div class="input-group">
              <input type="text" id="npm-registry-input" placeholder="npm 源地址" value="https://registry.npmmirror.com">
              <div class="preset-registries">
                <button class="btn btn-link" data-registry="https://registry.npmmirror.com">阿里源</button>
                <button class="btn btn-link" data-registry="https://mirrors.cloud.tencent.com/npm/">腾讯源</button>
                <button class="btn btn-link" data-registry="https://mirrors.huaweicloud.com/repository/npm/">华为源</button>
                <button class="btn btn-link" data-registry="https://registry.npmjs.org">官方源</button>
              </div>
            </div>
            <button class="btn btn-primary" id="configure-npm-btn">设置 npm 源</button>
            <div class="step-status" id="npm-config-status"></div>
          </div>

          <div class="setup-step">
            <div class="step-header">
              <span class="step-number"><i class="fas fa-cloud-download-alt"></i></span>
              <h3>安装 OpenCode</h3>
            </div>
            <p>使用独立 Node.js 环境安装 OpenCode</p>
            <button class="btn btn-primary" id="install-opencode-btn">安装 OpenCode</button>
            <div class="step-status" id="opencode-install-status"></div>
            <div class="install-log" id="install-log"></div>
          </div>

          <div class="setup-divider">
            <span class="divider-text">高危行为 谨慎操作</span>
          </div>

          <div class="setup-step" style="border: 1px solid #d32f2f; background: rgba(211, 47, 47, 0.05);">
            <div class="step-header">
              <span class="step-number" style="background-color: #d32f2f;"><i class="fa-solid fa-exclamation"></i></span>
              <h3 style="color: #d32f2f;">重置环境</h3>
            </div>
            <div class="step-content-horizontal">
              <p style="color: #d32f2f; margin-bottom: 0;">此操作将清空当前用户数据目录全部内容，操作不可逆请谨慎进行！</p>
              <button class="btn btn-primary" id="reset-env-btn" style="background-color: #d32f2f; border-color: #d32f2f;">重置环境</button>
            </div>
            <div class="step-status" id="reset-env-status"></div>
          </div>
        </div>
      </div>

      <!-- 配置管理页 -->
      <div class="page" id="page-config">
        <div class="page-header">
          <h2>OpenCode 软件配置</h2>
          <p class="subtitle">可视化编辑 OpenCode 配置文件</p>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon"><i class="fas fa-file-alt"></i></div>
          <h3>配置编辑器</h3>
          <p>此功能将在未来版本中提供，用于可视化编辑 OpenCode 配置文件</p>
        </div>
      </div>

      <!-- MCP 服务器页 -->
      <div class="page" id="page-mcp">
        <div class="page-header">
          <h2>MCP 服务器管理及管理</h2>
          <p class="subtitle">配置和管理 Model Context Protocol 服务器</p>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon"><i class="fas fa-plug"></i></div>
          <h3>MCP 配置</h3>
          <p>此功能将在未来版本中提供，用于可视化管理 MCP 服务器连接</p>
        </div>
      </div>

      <!-- Skills 配置页 -->
      <div class="page" id="page-skills">
        <div class="page-header">
          <h2>Skills 能力配置及管理</h2>
          <p class="subtitle">精品及定制化 Skills 管理和扩展</p>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon"><i class="fas fa-toolbox"></i></div>
          <h3>Skills 管理</h3>
          <p>此功能将在未来版本中提供，用于可视化配置 OpenCode Skills</p>
        </div>
      </div>

      <!-- 通用设置页 -->
      <div class="page" id="page-settings">
        <div class="page-header">
          <h2>通用设置</h2>
          <p class="subtitle">管理 OC-Launcher 应用设置</p>
        </div>
        
        <div class="setup-steps">
          <div class="setup-step">
            <div class="step-header">
              <span class="icon"><i class="fas fa-globe"></i></span>
              <h3>OpenCode Web 服务设置</h3>
            </div>
            <div class="web-options" style="margin-top: 0; border: none; padding: 0;">
              <label>
                Web 端口号：
                <input type="number" id="web-port" value="4096" min="1024" max="65535">
              </label>
            </div>
            <p class="input-hint" style="margin-top: 10px;"><i class="fas fa-lightbulb"></i> 修改端口号后，下次启动 Web 服务时生效</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <div id="custom-tooltip" class="tooltip"></div>
  <script src="renderer.js"></script>
</body>
</html>
