<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OC-Launcher</title>
  <link rel="stylesheet" href="fontawesome/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- 版本更新通知浮窗 -->
    <div class="update-notification" id="update-notification" style="display: none;">
      <i class="fas fa-arrow-circle-up"></i>
      <div class="notification-content">
        <div class="notification-title" id="update-notification-title">检测到 OpenCode 新版本 v1.0.0</div>
        <div class="notification-subtitle">点击此前往运行环境页面更新</div>
      </div>
      <button class="close-notification" id="close-notification">&times;</button>
    </div>

    <!-- 侧边栏 -->
    <nav class="sidebar">
      <div class="logo">
        <h1>OC-Launcher</h1>
        <span class="version" id="app-version">版本号: 加载中……</span>
      </div>
      <ul class="nav-menu">
        <li class="nav-item active" data-page="home">
          <div class="nav-item-content">
            <span class="icon"><i class="fas fa-home"></i></span>
            <span>首页</span>
          </div>
          <ul class="nav-submenu">
            <li class="submenu-item" data-target="home-status">环境状态</li>
            <li class="submenu-item" data-target="home-workdir">工作目录</li>
            <li class="submenu-item" data-target="home-actions">启动面板</li>
          </ul>
        </li>
        <li class="nav-item" data-page="setup">
          <div class="nav-item-content">
            <span class="icon"><i class="fa-solid fa-bars-progress"></i></span>
            <span>运行环境</span>
          </div>
          <ul class="nav-submenu">
            <li class="submenu-item" data-target="setup-nodejs">Node.js</li>
            <li class="submenu-item" data-target="setup-npm">NPM 源</li>
            <li class="submenu-item" data-target="setup-opencode">OpenCode</li>
            <li class="submenu-item" data-target="setup-reset">重置环境</li>
          </ul>
        </li>
        <li class="nav-item" data-page="config">
          <div class="nav-item-content">
            <span class="icon"><i class="fas fa-file-alt"></i></span>
            <span>配置管理</span>
          </div>
          <ul class="nav-submenu">
            <li class="submenu-item" data-target="config-opencode">配置文件</li>
            <li class="submenu-item" data-target="config-auth">鉴权文件</li>
            <li class="submenu-item" data-target="config-skills">Skills 文件</li>
          </ul>
        </li>
        <li class="nav-item" data-page="models">
          <div class="nav-item-content">
            <span class="icon"><i class="fa-brands fa-artstation"></i></span>
            <span>模型管理</span>
          </div>
          <ul class="nav-submenu">
            <li class="submenu-item" data-target="models-zen">OpenCode Zen</li>
            <li class="submenu-item" data-target="models-third">第三方模型</li>
          </ul>
        </li>
        <li class="nav-item disabled" data-page="mcp">
          <div class="nav-item-content">
            <span class="icon"><i class="fa-solid fa-atom"></i></span>
            <span>MCP 管理</span>
          </div>
          <ul class="nav-submenu">
            <li class="submenu-item disabled" data-target="mcp-config">MCP 配置</li>
            <li class="submenu-item disabled" data-target="mcp-servers">服务器管理</li>
          </ul>
        </li>
        <li class="nav-item" data-page="skills">
          <div class="nav-item-content">
            <span class="icon"><i class="fa-solid fa-wand-magic-sparkles"></i></i></span>
            <span>Skills 管理</span>
          </div>
          <ul class="nav-submenu">
            <li class="submenu-item" data-target="skills-project-dir">项目目录</li>
            <li class="submenu-item" data-target="skills-search">Skills 查询</li>
            <li class="submenu-item" data-target="skills-install">Skills 安装</li>
          </ul>
        </li>
        <li class="nav-item" data-page="settings">
          <div class="nav-item-content">
            <span class="icon"><i class="fas fa-cog"></i></span>
            <span>通用设置</span>
          </div>
        </li>
      </ul>
      <div class="sidebar-footer">
        <div class="footer-link" data-url="https://github.com/likeaturtle/OC-Launcher" title="GitHub">
          <i class="fab fa-github"></i>
        </div>
        <div class="footer-link" data-url="https://learnopencode.com/" title="Learn OpenCode">
          <img src="../icon/icon.svg" alt="OC-Launcher" class="footer-icon-img">
        </div>
        <div class="footer-link" data-url="https://opencode.ai/" title="OpenCode">
          <img src="../icon/opencode.svg" alt="OpenCode" class="footer-icon-img footer-opencode-icon">
        </div>
      </div>
    </nav>

    <!-- 主内容区 -->
    <main class="main-content">
      <!-- 顶部拖拽遮罩 -->
      <div class="drag-mask"></div>
      <!-- 顶部滚动遮罩 -->
      <div class="scroll-mask-top"></div>
      <!-- 首页 -->
      <div class="page active" id="page-home">
        <div class="page-header">
          <h2>欢迎使用 OC-Launcher</h2>
          <p class="subtitle">简单、快速、便捷使用 OpenCode，基于独立使用环境避免全局污染</p>
        </div>

        <div class="status-card" id="home-status">
          <div class="status-item">
            <span class="status-label">Node.js 环境状态</span>
            <span class="status-value" id="nodejs-status">未检测</span>
          </div>
          <div class="status-item">
            <span class="status-label">NPM 状态</span>
            <span class="status-value" id="npm-status">未检测</span>
          </div>
          <div class="status-item">
            <span class="status-label">NPM 源</span>
            <span class="status-value" id="npm-registry">未配置</span>
          </div>
          <div class="status-item">
            <span class="status-label">OpenCode 安装状态</span>
            <span class="status-value" id="opencode-status">未安装</span>
          </div>
        </div>

        <div class="work-dir-section" id="home-workdir">
          <h3><i class="fas fa-folder-open"></i> OpenCode 工作目录</h3>
          <div class="input-group">
            <input type="text" id="work-dir" placeholder="此处显示路径的目录将作为 OpenCode 工作目录">
            <button class="btn btn-primary" id="select-dir-btn">选择目录</button>
          </div>
          <p class="input-hint"><i class="fas fa-lightbulb"></i> 支持点击按钮选择 / 手动输入路径 / 拖拽目录上传</p>
        </div>

        <div class="actions" id="home-actions">
          <button class="btn btn-streaming btn-large" id="launch-tui-btn" disabled>
            <span class="btn-icon"><i class="fas fa-terminal"></i></span>
            <span class="btn-text">启动 TUI 界面</span>
          </button>
          <button class="btn btn-streaming btn-large" id="launch-web-btn" disabled>
            <span class="btn-icon"><i class="fas fa-globe"></i></span>
            <span class="btn-text">启动 WEB 界面</span>
          </button>
        </div>

      </div>

      <!-- 环境设置页 -->
      <div class="page" id="page-setup">
        <div class="page-header">
          <h2> OpenCode 运行环境配置</h2>
        </div>

        <div class="setup-steps">
          <div class="setup-step" id="setup-nodejs">
            <div class="step-header">
              <span class="step-number"><i class="fa-brands fa-node-js"></i></span>
              <h3>Node.js 环境安装</h3>
            </div>
            <p>解压并配置独立于本机的 Node.js 环境</p>
            <button class="btn btn-primary" id="extract-nodejs-btn">解压 Node.js</button>
          </div>

          <div class="setup-step" id="setup-npm">
            <div class="step-header">
              <span class="step-number"><i class="fa-brands fa-npm"></i></i></span>
              <h3>NPM 源配置</h3>
            </div>
            <p>首次解压 Node.js 环境默认为官方源，中国内地可能存在访问缓慢情况，建议修改</p>
            <div class="input-group">
              <input type="text" id="npm-registry-input" placeholder="NPM 源地址" value="https://registry.npmmirror.com">
              <div class="preset-registries">
                <button class="btn btn-link" data-registry="https://registry.npmmirror.com">阿里源</button>
                <button class="btn btn-link" data-registry="https://mirrors.cloud.tencent.com/npm/">腾讯源</button>
                <button class="btn btn-link" data-registry="https://mirrors.huaweicloud.com/repository/npm/">华为源</button>
                <button class="btn btn-link" data-registry="https://registry.npmjs.org">官方源</button>
              </div>
            </div>
            <button class="btn btn-primary" id="configure-npm-btn">设置 NPM 源</button>
          </div>

          <div class="setup-step" id="setup-opencode">
            <div class="step-header">
              <span class="step-number"><i class="fa-brands fa-instalod"></i></span>
              <h3>OpenCode 软件操作</h3>
            </div>
            <p>使用独立 Node.js 环境安装 / 更新 / 卸载 OpenCode</p>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
              <button class="btn btn-primary" id="install-opencode-btn">安装 / 更新 OpenCode</button>
              <button class="btn btn-secondary" id="uninstall-opencode-btn">卸载 OpenCode</button>
              <button class="btn btn-secondary" id="install-opencode-version-btn" style="display: inline-flex; align-items: center; gap: 8px;">
                <span style="white-space: nowrap;">安装指定版本 OpenCode</span>
                <input type="text" id="opencode-version-input" placeholder="如 1.1.28" style="border: dotted; background: transparent; color: inherit; padding: 2px 4px; width: 70px;">
              </button>
            </div>
          </div>


          <div class="setup-divider">
            <span class="divider-text">高危行为 谨慎操作</span>
          </div>

          <div class="setup-step" id="setup-reset" style="border: 1px solid #d32f2f; background: rgba(211, 47, 47, 0.05);">
            <div class="step-header">
              <span class="step-number" style="background-color: #d32f2f;"><i class="fa-solid fa-bolt"></i></span>
              <h3 style="color: #d32f2f;">重置环境</h3>
            </div>
            <p style="color: #d32f2f; margin-top: 20px; margin-bottom: 20px; margin-left: 0; padding-left: 20px; font-weight: bold;">重置环境将清空下列数据：</p>
            <p style="color: #d32f2f; margin-bottom: 8px; margin-left: 0; padding-left: 40px; font-size: 13px;">• Node.js 和 OpenCode 环境文件：<code id="reset-nodejs-path" style="color: #d32f2f; background: rgba(211, 47, 47, 0.15); padding: 2px 6px; border-radius: 3px; font-size: 12px;"></code></p>
            <p style="color: #d32f2f; margin-bottom: 8px; margin-left: 0; padding-left: 40px; font-size: 13px;">• OpenCode 配置文件：<code id="reset-config-path" style="color: #d32f2f; background: rgba(211, 47, 47, 0.15); padding: 2px 6px; border-radius: 3px; font-size: 12px;"></code></p>
            <p style="color: #d32f2f; margin-bottom: 8px; margin-left: 0; padding-left: 40px; font-size: 13px;">• OpenCode 鉴权文件：<code id="reset-auth-path" style="color: #d32f2f; background: rgba(211, 47, 47, 0.15); padding: 2px 6px; border-radius: 3px; font-size: 12px;"></code></p>
            <p style="color: #d32f2f; margin-bottom: 8px; margin-left: 0; padding-left: 40px; font-size: 13px;">• Skills 主文件目录：<code id="reset-skills-path" style="color: #d32f2f; background: rgba(211, 47, 47, 0.15); padding: 2px 6px; border-radius: 3px; font-size: 12px;"></code></p>
            <p style="color: #d32f2f; margin-top: 20px; margin-bottom: 20px; margin-left: 0; padding-left: 20px; font-weight: bold;">重置操作不可逆，请谨慎进行！</p>
            <div style="display: flex; justify-content: flex-end;">
              <button class="btn btn-primary" id="reset-env-btn" style="background-color: #d32f2f; border-color: #d32f2f;">重置环境</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 配置管理页 -->
      <div class="page" id="page-config">
        <div class="page-header">
          <h2>OpenCode 配置文件管理</h2>
        </div>

        <div class="setup-steps">
          <div class="setup-step" id="config-opencode">
            <div class="step-header">
              <span class="step-number"><i class="fas fa-file-code"></i></span>
              <h3>配置文件（config.json）</h3>
            </div>
            <p>生成 OpenCode 默认配置文件，作为主配置文件定义模型提供商、工具和能力等</p>
            <div style="display: flex; gap: 10px;">
              <button class="btn btn-primary" id="generate-config-btn">生成默认配置文件</button>
              <button class="btn btn-secondary" id="open-config-dir-btn"><i class="fas fa-folder-open"></i> 打开配置文件目录</button>
            </div>
            <div class="step-status" id="generate-config-status"></div>
          </div>

          <div class="setup-step" id="config-auth">
            <div class="step-header">
              <span class="step-number"><i class="fas fa-key"></i></span>
              <h3>鉴权文件（auth.json）</h3>
            </div>
            <p>生成 OpenCode 默认鉴权文件，储存身份验证相关数据，如应用 API Key、OAuth 令牌等</code></p>
            <div style="display: flex; gap: 10px;">
              <button class="btn btn-primary" id="generate-auth-btn">生成默认鉴权文件</button>
              <button class="btn btn-secondary" id="open-auth-dir-btn"><i class="fas fa-folder-open"></i> 打开鉴权文件目录</button>
            </div>
            <div class="step-status" id="generate-auth-status"></div>
          </div>
          
          <div class="setup-step" id="config-skills">
            <div class="step-header">
              <span class="step-number"><i class="fa-solid fa-wand-magic-sparkles"></i></span>
              <h3>Skills 文件（全局安装）</h3>
            </div>
            <p>快速访问 Skills 文件（全局安装）存储目录</p>
            <div style="display: flex; gap: 10px;">
              <button class="btn btn-secondary" id="open-global-skills-dir-btn"><i class="fas fa-folder-open"></i> 打开 Skills 主文件目录</button>
              <button class="btn btn-secondary" id="open-opencode-skills-dir-btn"><i class="fas fa-folder-open"></i> 打开 Skills for OpenCode 目录</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 模型管理页 -->
      <div class="page" id="page-models">
        <div class="page-header">
          <h2>模型及提供方管理</h2>
        </div>

        <div class="setup-steps">
          <div class="setup-step" id="models-zen">
            <div class="step-header">
              <span class="step-number"><i class="fa-solid fa-cube"></i></span>
              <h3>OpenCode Zen 模型管理</h3>
            </div>
            
            <!-- 第一部分: API Key 设置 -->
            <div class="model-section">
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                <h4 style="margin: 5px 0px;">API Key 设置</h4>
                <div id="zen-auth-status" style="display: none;">
                  <p style="font-size: 12px; color: #4ec9b0; margin: 0; display: flex; align-items: center; gap: 6px;">
                    <i class="fas fa-check-circle"></i>
                    <span>已配置</span>
                  </p>
                </div>
              </div>
              <div id="zen-auth-key-display" style="margin-bottom: 15px; display: none;">
                <p style="font-size: 12px; color: #858585; margin: 0; display: flex; align-items: center; gap: 6px;">
                  <span>API Key 为</span>
                  <button id="toggle-zen-key-btn" style="background: none; border: none; color: #858585; cursor: pointer; padding: 0; font-size: 13px; display: flex; align-items: center;">
                    <i class="fas fa-eye"></i>
                  </button>
                  <span id="zen-api-key-display" style="font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;">******</span>
                </p>
              </div>
              <div class="input-item">
                <!-- <label for="zen-api-key">OpenCode Zen API Key</label> -->
                <div style="display: flex; gap: 10px; margin-bottom: 8px; width: 100%;">
                  <input type="password" id="zen-api-key" placeholder="输入 OpenCode Zen API Key" style="flex: 1;">
                  <button class="btn btn-primary" id="save-zen-auth-btn" style="white-space: nowrap;">确认</button>
                </div>
                <p class="input-hint" style="margin: 0;">
                  访问 <a href="#" id="open-zen-link" style="color: #3794ff; text-decoration: none;">OpenCode Zen</a> 获取 API Key
                </p>
              </div>
            </div>
            
            <!-- 第二部分: 模型信息 -->
            <div class="model-section" style="margin-top: 20px; border-top: 1px solid #3c3c3c; padding-top: 20px;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h4 style="margin: 0;">OpenCode Zen 模型信息</h4>
                <div style="display: flex; gap: 10px; align-items: center;">
                  <input type="text" id="zen-model-search" placeholder="搜索模型 ID" 
                    style="padding: 8px 12px; background: #3c3c3c; border: 1px solid #555555; border-radius: 4px; color: #cccccc; font-size: 13px; width: 300px;">
                </div>
              </div>
              <div id="zen-model-list-container" class="model-table-container zen-model-table-container">
                <table class="model-table zen-model-table">
                  <thead>
                    <tr>
                      <th>默认</th>
                      <th>模型 ID</th>
                      <th>默认</th>
                      <th>模型 ID</th>
                    </tr>
                  </thead>
                  <tbody id="zen-model-list-body">
                    <tr>
                      <td colspan="4" style="text-align: center; color: #858585;">正在加载模型信息……</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <div class="setup-step" id="models-third">
            <div class="step-header">
              <span class="step-number"><i class="fas fa-cubes"></i></span>
              <h3>第三方模型管理</h3>
            </div>
            
            <div class="model-section">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h4 style="margin: 0;">第三方模型信息</h4>
                <div style="display: flex; gap: 10px; align-items: center;">
                  <input type="text" id="third-model-search" placeholder="搜索 PROVIDER ID / 模型名称" 
                    style="padding: 8px 12px; background: #3c3c3c; border: 1px solid #555555; border-radius: 4px; color: #cccccc; font-size: 13px; width: 300px;">
                </div>
              </div>
              <div class="model-table-container third-party-table-container">
                <table class="model-table third-party-table">
                  <thead>
                    <tr>
                      <th>默认</th>
                      <th>Provider ID</th>
                      <th>模型命名</th>
                      <th>模型名称</th>
                      <th>操作</th>
                    </tr>
                  </thead>
                  <tbody id="model-list-body">
                    <tr>
                      <td colspan="5" style="text-align: center; color: #858585;">正在加载模型信息……</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="model-section" style="margin-top: 20px; border-top: 1px solid #3c3c3c; padding-top: 20px;">
              <h4>新增第三方模型</h4>
              <div class="input-grid" style="margin-bottom: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="input-item">
                  <label for="new-provider-id">Provider ID</label>
                  <input type="text" id="new-provider-id" placeholder="例如: volcengine" list="provider-datalist">
                  <datalist id="provider-datalist"></datalist>
                </div>
                <div class="input-item">
                  <label for="new-model-alias">模型命名</label>
                  <input type="text" id="new-model-alias" placeholder="例如: VolcEngine">
                </div>
                <div class="input-item">
                  <label for="new-model-name">模型名称</label>
                  <input type="text" id="new-model-name" placeholder="例如: doubao-pro">
                </div>
                <div class="input-item">
                  <label for="new-base-url">Base URL</label>
                  <input type="text" id="new-base-url" placeholder="API 请求地址">
                </div>
                <div class="input-item" style="grid-column: span 2;">
                  <label for="new-api-key">API Key</label>
                  <input type="password" id="new-api-key" placeholder="API 令牌密钥">
                </div>
              </div>
              <div class="button-group" style="display: flex; gap: 10px; justify-content: space-between; align-items: center;">
                <div style="display: flex; gap: 10px;">
                  <button class="btn btn-primary" id="add-model-btn">添加模型</button>
                  <button class="btn btn-secondary" id="clear-model-btn">清空内容</button>
                </div>
                <button class="btn btn-link" id="open-parse-modal-btn" style="font-size: 0.9em; padding: 5px 10px;"><i class="fas fa-magic"></i> 智能解析</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- MCP 服务器页 -->
      <div class="page" id="page-mcp">
        <div class="page-header">
          <h2>MCP 服务</h2>
        </div>
        <div class="placeholder-content">
          <div class="placeholder-icon"><i class="fas fa-plug"></i></div>
          <h3>MCP 配置</h3>
          <p>此功能将在未来版本中提供，用于可视化管理 MCP 服务器连接</p>
        </div>
      </div>

      <!-- Skills 配置页 -->
      <div class="page" id="page-skills">
        <div class="page-header">
          <h2>Skills · 妙计管理</h2>
        </div>

        <!-- Skills 项目目录模块 -->
        <div class="work-dir-section" id="skills-project-dir">
          <h3><i class="fas fa-folder-open"></i> Skills 项目目录</h3>
          <div class="input-group">
            <input type="text" id="skill-install-dir" placeholder="此处显示路径的目录将作为 Skill 项目安装的目标目录">
            <button class="btn btn-primary" id="select-skill-dir-btn">选择目录</button>
          </div>
          <p class="input-hint"><i class="fas fa-lightbulb"></i> 支持点击按钮选择 / 手动输入路径 / 拖拽目录上传</p>
        </div>

        <div class="setup-steps">
          <div class="setup-step" id="skills-search">
            <div class="step-header">
              <span class="step-number"><i class="fa-solid fa-search"></i></span>
              <h3>Skills 查询</h3>
            </div>
            
            <div class="skill-install-section" style="padding-top: 5px;">
              <h4 style="margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center;">
                关键词查询 Skill
                <span class="skill-help-wrapper">
                  <i class="far fa-question-circle skill-help-icon"></i>
                  <div class="skill-tooltip">
                    <div class="skill-tooltip-content">
                      <p style="margin: 0;">支持输入任意内容，查询将匹配输入内容至 Skill 所在库名或 Skill 名称，请尽可能详细以提高查询准确性</p>
                    </div>
                  </div>
                </span>
              </h4>
              <div class="input-group">
                <input type="text" id="skill-search-input" placeholder="输入要查询的 skill 关键词">
                <button class="btn btn-primary" id="search-skill-btn">查询 Skill</button>
              </div>
            </div>
            
            <!-- 查询结果表格 -->
            <div id="skill-search-results">
              <div class="skill-table-container">
                <table class="model-table">
                  <thead>
                    <tr>
                      <th>Skill 所在库</th>
                      <th>Skill 名称</th>
                      <th>访问链接</th>
                      <th>操作</th>
                    </tr>
                  </thead>
                  <tbody id="skill-search-results-body">
                    <tr>
                      <td colspan="4" style="text-align: center; color: #858585;">暂无查询结果</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            
            <div class="step-status" id="skill-search-status" style="margin-top: 20px;"></div>

            <!-- 水平分割线 -->
            <div style="border-top: 1px solid #3c3c3c; margin: 20px 0 10px 0;"></div>

            <!-- 分析可用 skill -->
            <div class="skill-install-section">
              <h4 style="margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center;">
                分析可用 Skill
                <span class="skill-help-wrapper">
                  <i class="far fa-question-circle skill-help-icon"></i>
                  <div class="skill-tooltip">
                    <div class="skill-tooltip-content">
                      <p style="margin: 0 0 8px 0;">输入框中支持输入以下内容：</p>
                      <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">1. GitHub shorthand ，格式为 owner/repo，例如 vercel-labs/agent-skills</p>
                      <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">2. GitHub URL，例如 https://github.com/vercel-labs/agent-skills</p>
                      <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">3. GitHub repo，例如 https://github.com/vercel-labs/agent-skills/tree/main/skills/frontend-design</p>
                      <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">4. GitLab URL，例如 https://gitlab.com/org/repo</p>
                      <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">5. 任何 git URL，例如 git@github.com:vercel-labs/agent-skills.git</p>
                      <p style="margin: 0; padding-left: 1em; text-indent: -1em;">6. 本地文件路径，例如 my-local-skills</p>
                    </div>
                  </div>
                </span>
              </h4>
              <div class="input-group">
                <input type="text" id="analyze-skill-input" placeholder="输入 GitHub 仓库地址或留空分析全部（例如：owner/repo）">
                <button class="btn btn-primary" id="analyze-skills-btn">分析 Skill</button>
              </div>
            </div>

            <!-- 分析结果表格 -->
            <div id="skill-analyze-results">
              <div class="skill-table-container">
                <table class="model-table skill-analyze-table">
                  <thead>
                    <tr>
                      <th>Skill 名称</th>
                      <th>Skill 描述</th>
                      <th>操作</th>
                    </tr>
                  </thead>
                  <tbody id="skill-analyze-results-body">
                    <tr>
                      <td colspan="3" style="text-align: center; color: #858585;">暂无分析结果</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="step-status" id="skill-analyze-status" style="margin-top: 15px;"></div>
          </div>

          <div class="setup-step" id="skills-install">
            <div class="step-header">
              <span class="step-number"><i class="fa-solid fa-download"></i></span>
              <h3>Skills 安装</h3>
            </div>
            
            <!-- Skill 安装地址 -->
            <div class="skill-install-section" style="padding-top: 5px;">
              <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 20px;">
                <h4 style="font-size: 14px; color: #cccccc; margin: 0; display: flex; align-items: center;">
                  Skill 安装地址
                  <span class="skill-help-wrapper">
                    <i class="far fa-question-circle skill-help-icon"></i>
                    <div class="skill-tooltip">
                      <div class="skill-tooltip-content">
                        <p style="margin: 0 0 8px 0;">输入框中支持输入以下内容：</p>
                        <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">1. GitHub shorthand ，格式为 owner/repo，例如 vercel-labs/agent-skills</p>
                        <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">2. GitHub URL，例如 https://github.com/vercel-labs/agent-skills</p>
                        <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">3. GitHub repo，例如 https://github.com/vercel-labs/agent-skills/tree/main/skills/frontend-design</p>
                        <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">4. GitLab URL，例如 https://gitlab.com/org/repo</p>
                        <p style="margin: 0 0 6px 0; padding-left: 1em; text-indent: -1em;">5. 任何 git URL，例如 git@github.com:vercel-labs/agent-skills.git</p>
                        <p style="margin: 0;">6. 本地文件路径，例如 my-local-skills</p>
                      </div>
                    </div>
                  </span>
                </h4>
                <!-- 全局安装滑动按钮 -->
                <label class="toggle-switch">
                  <input type="checkbox" id="skill-global-install">
                  <span class="toggle-slider"></span>
                  <span class="toggle-label">全局安装</span>
                </label>
              </div>
              <div class="input-group">
                <input type="text" id="skill-install-url" placeholder="输入 Skill 安装地址，如：@opencode/skill-pdf">
                <button class="btn btn-primary" id="install-skill-btn">安装 Skill</button>
              </div>
              
              <!-- Skills 管理功能按钮 -->
              <div style="margin-top: 15px; display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                <button class="btn btn-secondary btn-small" id="check-skill-update-btn">
                  <i class="fas fa-sync-alt"></i> 检查 Skill 更新
                </button>
                <button class="btn btn-secondary btn-small" id="upgrade-skill-btn">
                  <i class="fas fa-arrow-up"></i> 升级 Skill
                </button>
              </div>
            </div>

            <div class="step-status" id="skill-install-status"></div>
            <div class="install-log" id="skill-install-log"></div>
          </div>
        </div>
      </div>

      <!-- 通用设置页 -->
      <div class="page" id="page-settings">
        <div class="page-header">
          <h2>通用设置</h2>
        </div>
        
        <div class="placeholder-content">
          <div class="placeholder-icon"><i class="fas fa-cog"></i></div>
          <h3>通用设置</h3>
          <p>此功能将在未来版本中提供更多选项，目前 Web 服务端口等配置已移至 opencode.json 控制</p>
        </div>
      </div>
    </main>
  </div>

  <div id="custom-tooltip" class="tooltip"></div>

  <!-- 修改模型弹窗 -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>修改模型信息</h3>
        <button class="modal-close" id="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <input type="hidden" id="edit-old-provider-id">
          <input type="hidden" id="edit-old-model-name">
          
          <div class="input-item">
            <label>Provider ID</label>
            <input type="text" id="edit-provider-id">
          </div>
          <div class="input-item">
            <label>模型命名</label>
            <input type="text" id="edit-model-alias">
          </div>
          <div class="input-item">
            <label>模型名称</label>
            <input type="text" id="edit-model-name">
          </div>
          <div class="input-item">
            <label>Base URL</label>
            <input type="text" id="edit-base-url">
          </div>
          <div class="input-item" style="grid-column: span 2;">
            <label>API Key</label>
            <input type="password" id="edit-api-key">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancel-edit">取消</button>
        <button class="btn btn-primary" id="save-edit">保存修改</button>
      </div>
    </div>
  </div>

  <!-- 智能解析弹窗 -->
  <div id="parse-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>示例代码智能解析</h3>
        <button class="modal-close" id="close-parse-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 10px; color: #cccccc; font-size: 0.9em;">将大模型示例代码（如 Python/OpenAI SDK 代码）粘贴到下方：</p>
        <textarea id="parse-code-input" style="width: 100%; height: 200px; background: #1e1e1e; border: 1px solid #3c3c3c; color: #ffffff; padding: 10px; border-radius: 4px; resize: vertical; font-family: 'Consolas', 'Monaco', monospace;" placeholder="例如:
client = OpenAI(
    api_key='your_key',
    base_url='https://api.example.com/v1'
)
completion = client.chat.completions.create(
    model='gpt-3.5-turbo',
    ...
)"></textarea>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancel-parse">取消</button>
        <button class="btn btn-primary" id="confirm-parse">确认解析</button>
      </div>
    </div>
  </div>

  <!-- Skill 安装进度弹窗 -->
  <div class="modal" id="skill-install-modal">
    <div class="modal-content" style="max-width: 950px; height: 600px; display: flex; flex-direction: column;">
      <div class="modal-header">
        <h3>Skill 安装进度</h3>
      </div>
      <div class="modal-body" style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
        <div class="install-info">
          <p><strong>Skill:</strong> <span id="modal-skill-name"></span></p>
          <p><strong>安装类型:</strong> <span id="modal-install-type"></span></p>
          <p><strong>安装目录:</strong> <span id="modal-install-dir"></span> <i class="fas fa-folder-open" id="open-install-dir-icon" style="color: #569cd6; cursor: pointer; margin-left: 8px; display: none;" title="打开目录"></i></p>
        </div>
        <div class="step-status info" id="modal-install-status">正在准备安装……</div>
        <div class="install-log active" id="modal-install-log" style="margin-top: 15px; flex: 1; overflow-y: auto;"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="close-install-modal" disabled>关闭</button>
      </div>
    </div>
  </div>

  <!-- 环境设置进度弹窗 -->
  <div class="modal" id="env-progress-modal">
    <div class="modal-content" style="max-width: 950px; height: 600px; display: flex; flex-direction: column;">
      <div class="modal-header">
        <h3 id="env-modal-title">操作进度</h3>
      </div>
      <div class="modal-body" style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
        <div class="step-status info" id="env-modal-status" style="margin-top: 15px;">正在准备……</div>
        <div class="install-log active" id="env-modal-log" style="margin-top: 15px; flex: 1; overflow-y: auto;"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="close-env-modal" disabled>关闭</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
